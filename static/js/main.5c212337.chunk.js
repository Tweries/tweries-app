(this["webpackJsonptweries-app"]=this["webpackJsonptweries-app"]||[]).push([[0],{13:function(e){e.exports=JSON.parse('{"domain":"dev-17-x3zfb.auth0.com","clientId":"iqgFXkcTFo9l80i7llzcurmrfgVsn3TZ"}')},22:function(e){e.exports=JSON.parse('{"a":"0.35.1"}')},27:function(e,t,a){e.exports=a(47)},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(19),c=a.n(r),o=a(9),s=a.n(o),u=a(0),l=a.n(u),i=a(20),d=a(2),p=a.n(d),f=a(4),h=a(3),g=a(26),m=a(21),b=a.n(m),v=function(){return window.history.replaceState({},document.title,window.location.pathname)},y=l.a.createContext(),w=function(){return Object(u.useContext)(y)},x="Log in",E="Log out",O=function(e){var t=e.isAuthenticated,a=e.loginWithRedirect,n=e.logout,r=e.user;return l.a.createElement("header",{className:"flex flex-col items-center"},t?[l.a.createElement("img",{alt:r.name,className:"border border-gray-500 rounded",key:"img",src:r.picture}),l.a.createElement("span",{key:"span"},l.a.createElement("span",{"aria-label":"hello",role:"img"},"\ud83d\udc4b")," ",r.name),l.a.createElement("button",{className:"bg-gray-300 border border-gray-500 font-bold px-4 rounded","data-testid":"logout",key:"button",onClick:function(){return n({returnTo:window.location.href})}},E)]:l.a.createElement("button",{className:"bg-gray-300 border border-gray-500 font-bold px-4 rounded","data-testid":"login",onClick:function(){return a({})}},x))};var j=a(6),k=a(5),T=a.n(k),S=a(22),N="https://tweries-api.herokuapp.com";function C(){return(C=Object(f.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(N,"/api/v2/health"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){return C.apply(this,arguments)};function R(){return(R=Object(f.a)(p.a.mark((function e(t){var a,n,r,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.inReplyToTweetUrl,n=t.items,r=t.userId,e.next=3,fetch("".concat(N,"/api/v2/tweetstorm"),{body:JSON.stringify({inReplyToTweetUrl:a,items:n,userId:r}),headers:{"Content-Type":"application/json"},method:"POST"});case 3:return c=e.sent,e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){return R.apply(this,arguments)},_="github.com/Tweries",U="Tweries",W="@TweriesApp";var P=function(e){var t=e.healthy,a=e.version;return l.a.createElement("footer",{className:"flex flex-col items-center text-xs"},l.a.createElement("p",{className:T()({"text-green-800":t,"text-red-800":!t})},U," v",a," \xa9 ",(new Date).getFullYear()," "),l.a.createElement("ul",{className:"flex"},l.a.createElement("li",{className:"font-bold m-1 text-blue-800"},l.a.createElement("a",{href:"https://twitter.com/TweriesApp",rel:"noopener noreferrer",target:"_blank"},W)),l.a.createElement("li",{className:"font-bold m-1 text-blue-800"},l.a.createElement("a",{href:"https://github.com/Tweries",rel:"noopener noreferrer",target:"_blank"},_))))};function F(){return(F=Object(f.a)(p.a.mark((function e(t){var a,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.inReplyToTweetUrl,n=t.userId,e.next=3,fetch("".concat(N,"/api/v2/tweet"),{body:JSON.stringify({tweetUrl:a,userId:n}),headers:{"Content-Type":"application/json"},method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(e){return F.apply(this,arguments)},J="Optional: reply to Tweet URL";var D=function(e){var t=e.callback,a=e.onChange,n=e.tweetUrl,r=e.userId,c=Object(u.useState)(!1),o=Object(h.a)(c,2),s=o[0],i=o[1],d=Object(u.useState)(!1),g=Object(h.a)(d,2),m=g[0],b=g[1];return Object(u.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H({inReplyToTweetUrl:n,userId:r});case 3:a=e.sent,console.log(a),a.data?(t(null,a.data),i(!0),b(!1)):(t(a.error),i(!1),b(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0),i(!1),b(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}n&&r&&(b(!0),function(){e.apply(this,arguments)}())}),[t,n,r]),l.a.createElement("textarea",{className:T()("border border-gray-500 p-2 rounded",{"bg-gray-200":!0===m||""===n,"bg-green-200":!1===m&&""!==n&&s,"bg-red-200":!1===m&&""!==n&&!s}),"data-testid":"reply-to",onChange:function(e){var t=e.target.value;a(t)},placeholder:J,rows:1,value:n})};var G=function(e){var t=e.notification,a=e.onClick;if(t){var n=t.message,r=t.type;return l.a.createElement("div",{className:T()("border flex justify-between mb-2 p-2 rounded",{"bg-green-100 border-green-800 text-green-800":"success"===r,"bg-red-100 border-red-800 text-red-800":"danger"===r})},l.a.createElement("span",null,n),l.a.createElement("button",{className:"font-bold","data-testid":"dismiss",onClick:a},"\xd7"))}return null};var L=function(e,t){var a=Object(u.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),n=Object(h.a)(a,2),r=n[0],c=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]},M=a(7),z=a.n(M);var B=function(e){function t(e,t){var a=["-","\u2013",".",",",";","!","?"].map((function(e){return{key:e,value:z.a.lastIndexOf(t,e)}})).sort((function(e,t){return e.value>t.value?-1:e.value<t.value?1:0}))[0];return-1!==a.value&&function(e,t){return" "===z.a.substr(t,e+1,1)}(a.value,t)&&!function(e,t){return e===t}(e,t)&&(t=z.a.substr(t,0,a.value+1)),t}function a(e,t){return void 0===e&&void 0===t?" ".concat("_/_"):0===e&&1===t?"":" ".concat(e+1,"/").concat(t)}return function(e){var n=e.hashtags,r=e.linefeed;null!==r&&void 0!==r&&""!==r||(r="\n");for(var c=function(e,t){var a=t.slice();return"\n"===e&&(a=a.replace(/\n+/g,"\n")),a}(r,e.source),o=[];0!==c.length;){var s=void 0,u=void 0;u=n.length>0?280-n.length-1-a().length:280-a().length,-1!==(s=z.a.prune(c,u,"")).indexOf(r)?(s=z.a.substr(s,0,s.indexOf(r)),c=z.a.substr(c,s.length+r.length)):(s=t(c,s),c=z.a.substr(c,s.length+1)),o.push(s)}return o.map((function(e,t){var r,c=a(t,o.length);return r=n.length>0?"".concat(z.a.trim(e)," ").concat(n).concat(c):"".concat(z.a.trim(e)).concat(c),{id:"_"+Math.random().toString(36).substr(2,9),tweet:r}}))}},V=a(25);var Y=function(e){var t=e.feature;return{hashtags:"",healthy:!1,items:B(t)({hashtags:"",linefeed:"\n",source:""}),linefeed:"\n",notification:null,source:"",userId:null}},q="APPEND_SCREEN_NAME",K="CHANGE_HASHTAGS",X="CHANGE_LINEFEED",Z="CHANGE_SOURCE",$="CHANGE_TWEET",Q="DISMISS_TOAST",ee="RESET_TWEETSTORM",te="SET_HEALTHY",ae="SET_USER_ID";var ne=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y({feature:e}),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case q:var n="@".concat(a.value," ").concat(t.source);return Object(j.a)({},t,{items:B(e)({hashtags:t.hashtags,linefeed:t.linefeed,source:n}),source:n});case K:return Object(j.a)({},t,{hashtags:a.value,items:B(e)({hashtags:a.value,linefeed:t.linefeed,source:t.source})});case X:return Object(j.a)({},t,{items:B(e)({hashtags:t.hashtags,linefeed:a.value,source:t.source}),linefeed:a.value});case Z:return Object(j.a)({},t,{items:B(e)({hashtags:t.hashtags,linefeed:t.linefeed,source:a.value}),source:a.value});case $:return Object(j.a)({},t,{items:Object(V.a)(t.items).map((function(e){return e.id===a.value.id&&(e.tweet=a.value.tweet),e}))});case Q:return Object(j.a)({},t,{notification:null});case ee:return Object(j.a)({},Y({feature:e}),{healthy:t.healthy,notification:a.value,userId:t.userId});case te:return Object(j.a)({},t,{healthy:a.value});case ae:return Object(j.a)({},t,{userId:a.value});default:return t}}};var re=function(e){var t=e.length,a=0===t?"":t,n="tweet"===e.type;return l.a.createElement("small",{className:T()("mb-2 text-right",{"text-gray-700":!n||n&&t<=280,"text-red-500 ":n&&t>280})},a)},ce=a(23),oe=a(24);var se=function(e){var t=e.disabled,a=e.onClick,n=e.waiting;return l.a.createElement("button",{disabled:t,className:T()("bg-gray-300 border border-gray-500 font-bold px-4 mb-2 rounded self-center",{"bg-blue-600 text-white":!t,"cursor-auto":t}),"data-testid":"tweet",onClick:a},n?l.a.createElement(ce.a,{icon:oe.a,spin:!0}):"Tweet")},ue="...",le="Edits can be made in the boxes below before publishing",ie="Newline(s)",de="Start typing, to insert a break prior to reaching 280 characters please use",pe="The tweetstorm has been created successfully.",fe="Tweries",he="What's happening?",ge="#hashtags";var me=function(e){var t=e.initialState,a=e.reducer,n=w(),r=n.isAuthenticated,c=n.loading,s=n.loginWithRedirect,i=n.logout,d=n.user,g=Object(o.useFeature)();function m(e,t){e&&(console.log(e),V({type:te,value:!1})),t&&(console.log(t),V({type:te,value:!t.error}))}Object(u.useEffect)((function(){function e(){return(e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I();case 3:m(null,e.sent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(u.useEffect)((function(){r&&d&&V({type:ae,value:d.sub})}),[r,d]);var b=L("hashtags",""),v=Object(h.a)(b,2),y=v[0],x=v[1],E=L("source",""),k=Object(h.a)(E,2),N=k[0],C=k[1],R=Object(u.useReducer)(a,Object(j.a)({},t,{hashtags:y,items:B(g)({hashtags:y,linefeed:t.linefeed,source:N}),source:N})),_=Object(h.a)(R,2),U=_[0],W=U.hashtags,F=U.healthy,H=U.items,J=U.notification,M=U.source,z=U.userId,V=_[1];Object(u.useEffect)((function(){if(J){var e=setTimeout((function(){V({type:Q})}),3e3);return function(){return clearTimeout(e)}}}),[J]);var Y=Object(u.useState)(""),X=Object(h.a)(Y,2),ne=X[0],ce=X[1],oe=Object(u.useState)(!1),me=Object(h.a)(oe,2),be=me[0],ve=me[1];function ye(e,t){var a=pe,n="success";(e||t.error)&&(a=e?e.message:t.error.message,n="danger"),console.log(e,t),V({type:ee,value:{message:a,type:n}}),x(""),ce(""),C(""),ve(!1)}function we(){return(we=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(!0),e.prev=1,e.next=4,A({inReplyToTweetUrl:ne,items:H,userId:z});case 4:ye(null,e.sent),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),ye(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var xe=Object(u.useCallback)((function(e,t){t&&V({type:q,value:t.user.screen_name})}),[]);return c?l.a.createElement("article",{className:"container content-center mx-auto m-1 p-4 text-center"},ue):l.a.createElement("article",{className:"container content-center mx-auto m-1 p-4"},l.a.createElement(O,{dispatch:V,isAuthenticated:r,loginWithRedirect:s,logout:i,user:d}),l.a.createElement("h1",{className:"font-bold logo my-4 text-5xl text-center"},fe),l.a.createElement("form",{className:"flex flex-col",onSubmit:function(e){return e.preventDefault()}},r&&l.a.createElement(D,{callback:xe,onChange:ce,tweetUrl:ne,userId:z}),l.a.createElement("small",{className:"mb-2 p-2"},de," ",l.a.createElement("span",{className:"font-bold"},ie)),l.a.createElement("textarea",{className:"bg-gray-200 border border-gray-500 p-2 rounded","data-testid":"source",placeholder:he,rows:8,value:M,onChange:function(e){V({type:Z,value:e.target.value}),C(e.target.value)}}),l.a.createElement(re,{length:M.length}),l.a.createElement("textarea",{className:"bg-gray-200 border border-gray-500 p-2 rounded","data-testid":"hashtags",onChange:function(e){V({type:K,value:e.target.value}),x(e.target.value)},placeholder:ge,rows:1,type:"text",value:W}),l.a.createElement(re,{length:W.length}),H.length>0&&[l.a.createElement("small",{className:"mb-2 p-2",key:"copy"},le),l.a.createElement("ul",{className:"flex flex-col","data-testid":"list",key:"list"},H.map((function(e,t){return l.a.createElement("li",{className:"flex flex-col",key:t},function(e){return l.a.createElement("textarea",{className:T()("bg-gray-200 p-2 rounded",{"border border-gray-500":e.tweet.length<=280,"border-2 border-red-500":e.tweet.length>280}),onChange:function(t){V({type:$,value:{id:e.id,tweet:t.target.value}})},rows:4,value:e.tweet})}(e),l.a.createElement(re,{length:e.tweet.length,type:"tweet"}))})))],l.a.createElement(se,{disabled:!r||!H.length>0||!F||H.find((function(e){return e.tweet.length>280})),onClick:function(){return we.apply(this,arguments)},waiting:be})),l.a.createElement(G,{notification:J,onClick:function(){return V({type:Q})}}),l.a.createElement(P,{healthy:F,version:S.a}))};var be=function(e){var t=e.logEvent,a=e.reducer;return function(e,n){var r=a(e,n);switch(n.type){case K:case Z:case $:break;default:t(n.type,n.value)}return r}},ve=(a(46),a(13)),ye=["FEATURE_V1"],we=a(14);var xe=function(){we.a.initialize("UA-54446639-10"),we.a.pageview("/")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(i.render)(l.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,n=void 0===a?v:a,r=Object(g.a)(e,["children","onRedirectCallback"]),c=Object(u.useState)(),o=Object(h.a)(c,2),s=o[0],i=o[1],d=Object(u.useState)(),m=Object(h.a)(d,2),w=m[0],x=m[1],E=Object(u.useState)(),O=Object(h.a)(E,2),j=O[0],k=O[1],T=Object(u.useState)(!0),S=Object(h.a)(T,2),N=S[0],C=S[1],I=Object(u.useState)(!1),R=Object(h.a)(I,2),A=R[0],_=R[1];Object(u.useEffect)((function(){(function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,c,o,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b()(r);case 2:if(t=e.sent,k(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,c=a.appState,n(c);case 10:return e.next=12,t.isAuthenticated();case 12:if(o=e.sent,i(o),!o){e.next=19;break}return e.next=17,t.getUser();case 17:s=e.sent,x(s);case 19:C(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var U=function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},_(!0),e.prev=2,e.next=5,j.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,_(!1),e.finish(10);case 13:return e.next=15,j.getUser();case 15:a=e.sent,x(a),i(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,j.handleRedirectCallback();case 3:return e.next=5,j.getUser();case 5:t=e.sent,C(!1),i(!0),x(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(y.Provider,{value:{isAuthenticated:s,user:w,loading:N,popupOpen:A,loginWithPopup:U,handleRedirectCallback:W,getIdTokenClaims:function(){return j.getIdTokenClaims.apply(j,arguments)},loginWithRedirect:function(){return j.loginWithRedirect.apply(j,arguments)},getTokenSilently:function(){return j.getTokenSilently.apply(j,arguments)},getTokenWithPopup:function(){return j.getTokenWithPopup.apply(j,arguments)},logout:function(){return j.logout.apply(j,arguments)}}},t)}),{client_id:ve.clientId,domain:ve.domain,onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)},redirect_uri:window.location.origin},l.a.createElement(n.AmplitudeProvider,{amplitudeInstance:c.a.getInstance(),apiKey:"7cbe8a9a37db4f88f06c79a387943cca"},l.a.createElement(n.Amplitude,null,(function(e){return function(e){xe();var t=Object(o.setFeatures)(ye);return l.a.createElement(s.a,{features:ye},l.a.createElement(me,{initialState:Y({feature:t}),reducer:be({logEvent:e,reducer:ne(t)})}))}(e.logEvent)})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.5c212337.chunk.js.map