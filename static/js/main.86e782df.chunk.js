(this["webpackJsonptweries-app"]=this["webpackJsonptweries-app"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"domain":"dev-17-x3zfb.auth0.com","clientId":"iqgFXkcTFo9l80i7llzcurmrfgVsn3TZ"}')},24:function(e){e.exports=JSON.parse('{"a":"1.9.0"}')},29:function(e,t,n){e.exports=n(49)},44:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(15),r=n(22),c=n.n(r),o=n(10),l=n.n(o),u=n(0),i=n.n(u),s=n(23),p=(n(44),n(16)),f="https://tweries-api.herokuapp.com",d=n(3),m=n(4),b=n(24),h=n(6),v=n.n(h),g="@TweriesApp",w="github.com/Tweries",y="Tweries";var E=function(e){var t=e.healthy,n=e.version;return i.a.createElement("footer",{className:"flex flex-col items-center text-sm"},i.a.createElement("ul",{className:"flex"},i.a.createElement("li",{className:"m-1"},i.a.createElement("a",{href:"https://github.com/Tweries",rel:"noopener noreferrer",target:"_blank"},w)),i.a.createElement("li",{className:"m-1"},i.a.createElement("a",{href:"https://twitter.com/TweriesApp",rel:"noopener noreferrer",target:"_blank"},g))),i.a.createElement("p",{className:v()({"text-green-800":t,"text-red-800":!t})},y," v",n," \xa9 ",(new Date).getFullYear()))};function x(e){var t=e.length,n=0===t?null:t,a="tweet"===e.type;return i.a.createElement("p",{className:v()("text-right text-xs",{"text-gray-700":!a||a&&t<=280,"text-red-500 ":a&&t>280})},"\xa0",n)}x.defaultProps={type:""};var O=x,j=n(2),T=n.n(j),k=n(5);function N(){return(N=Object(k.a)(T.a.mark((function e(t){var n,a,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.inReplyToTweetUrl,a=t.userId,e.next=3,fetch("".concat(f,"/api/v2/tweet"),{body:JSON.stringify({tweetUrl:n,userId:a}),headers:{"Content-Type":"application/json"},method:"POST"});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(e){return N.apply(this,arguments)},C="If you want to reply to a specific Tweet:",I="URL goes here";var R=function(e){var t=e.callback,n=e.onChange,a=e.tweetUrl,r=e.userId,c=Object(u.useState)(!1),o=Object(m.a)(c,2),l=o[0],s=o[1],p=Object(u.useState)(!1),f=Object(m.a)(p,2),d=f[0],b=f[1];return Object(u.useEffect)((function(){function e(){return(e=Object(k.a)(T.a.mark((function e(){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S({inReplyToTweetUrl:a,userId:r});case 3:n=e.sent,console.log(n),n.data?(t(null,n.data),s(!0),b(!1)):(t(n.error),s(!1),b(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),t(e.t0),s(!1),b(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}a&&r&&(b(!0),function(){e.apply(this,arguments)}())}),[t,a,r]),i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:"pb-1 text-sm",htmlFor:"reply-to"},C),i.a.createElement("textarea",{className:v()("p-2 tweries-border",{"bg-green-200":!1===d&&""!==a&&l,"bg-red-200":!1===d&&""!==a&&!l,"tweries-background-color-blue-white":!0===d||""===a}),"data-testid":"reply-to",name:"reply-to",onChange:function(e){var t=e.target.value;n(t)},placeholder:I,rows:1,value:a}))};var U=function(e){var t=e.item,n=e.onChange;return i.a.createElement("textarea",{className:v()("p-2 tweries-background-color-blue-white",{"border-2 border-red-500":t.tweet.length>280,"tweries-border":t.tweet.length<=280}),"data-testid":"textarea",name:t.id,onChange:n,rows:4,value:t.tweet})},_=n(13),W=n(9),A="Tweet";var F=function(e){var t=e.disabled,n=e.onClick,a=e.waiting;return i.a.createElement("button",{className:v()("bg-gray-300 border border-gray-500 font-bold my-4 px-6 py-2 rounded self-center",{"cursor-auto":t||a,"tweries-background-color-blue-button":!(t||a)}),"data-testid":"tweet",disabled:t||a,onClick:n,type:"button"},a?i.a.createElement(W.a,{icon:_.b,spin:!0}):A)},P="Edits can be made in the boxes below before publishing",J="Start typing. To insert a break prior to reaching 280 characters, please use Newline(s)",z="Tweet",D="Type your thoughts here";var L=function(e){var t=e.healthy,n=e.inReplyToTweetUrl,a=e.items,r=e.onChangeSource,c=e.onChangeTweet,o=e.onClick,l=e.replyToTweetCallback,u=e.setInReplyToTweetUrl,s=e.source,p=e.userId,f=e.waiting;return i.a.createElement("form",{className:"flex flex-col",onSubmit:function(e){return e.preventDefault()}},i.a.createElement(R,{callback:l,onChange:u,tweetUrl:n,userId:p}),i.a.createElement("p",{className:"italic py-4 text-sm"},J),i.a.createElement("textarea",{className:"p-2 tweries-background-color-blue-white tweries-border","data-testid":"source",name:"source",onChange:r,placeholder:D,rows:8,value:s}),i.a.createElement(O,{length:s.length}),a.length>0&&[i.a.createElement("p",{className:"italic py-4 text-sm",key:"copy"},P),i.a.createElement("ul",{className:"flex flex-col","data-testid":"list",key:"list"},a.map((function(e,t){return i.a.createElement("li",{className:"flex flex-col",key:e.id},i.a.createElement("label",{className:"pb-1 text-sm",htmlFor:e.id},"".concat(z," #").concat(t+1)),i.a.createElement(U,{item:e,onChange:function(t){return c(t,e)}}),i.a.createElement(O,{length:e.tweet.length,type:"tweet"}))})))],i.a.createElement(F,{disabled:!t||!a.length>0||a.some((function(e){return e.tweet.length>280})),onClick:o,waiting:f}))},H="...";var M=function(){return i.a.createElement("article",{className:"container content-center mx-auto m-1 p-4 text-center"},H)},Y="Log in",B="Login is necessary in order for your series of Tweets to be sent through your Twitter account";var G=function(e){var t=e.loginWithRedirect;return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"flex justify-center my-4"},i.a.createElement("button",{className:"font-bold px-6 py-2 rounded tweries-background-color-blue-button","data-testid":"login",onClick:function(){return t({})},type:"button"},Y)),i.a.createElement("p",{className:"flex justify-center my-4"},i.a.createElement(W.a,{className:"tooltip tweries-color-dark-blue",icon:_.a,size:"1x"}),i.a.createElement("span",{className:"p-3 mt-6 -ml-1 tooltip-text tweries-border"},B)))},V="Log out";var q=function(e){var t=e.logout,n=e.user,a=Object(u.useState)(!0),r=Object(m.a)(a,2),c=r[0],o=r[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"flex items-center"},c&&i.a.createElement("img",{alt:n.name,className:"border mr-2 rounded-full tweries-border-color",onError:function(){return o(!1)},src:n.picture}),n.name),i.a.createElement("button",{className:"px-4 underline","data-testid":"logout",onClick:function(){return t({returnTo:window.location.href})},type:"button"},V))},K=n(25),X="Tweries",Z="When 280 characters just aren't enough";var $=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{className:"font-bold my-4 text-5xl text-center tweries-font-family"},X),i.a.createElement("h2",{className:"my-4 text-center"},Z),i.a.createElement("p",{className:"my-4 text-center"},i.a.createElement(W.a,{className:"tweries-color-blue",icon:K.a,size:"3x"})))},Q="Your tweetstorm has been created!";function ee(e){var t=e.notification,n=e.onClick;if(t){var a=t.link,r=t.message,c=t.type;return i.a.createElement("p",{className:v()("border flex justify-between mb-2 p-2 rounded",{"bg-green-100 border-green-800 text-green-800":"success"===c,"bg-red-100 border-red-800 text-red-800":"danger"===c}),"data-testid":"notification"},i.a.createElement("span",null,"danger"===c&&r,"success"===c&&i.a.createElement("a",{className:"underline",href:a,rel:"noopener noreferrer",target:"_blank"},Q)),i.a.createElement("button",{className:"font-bold","data-testid":"dismiss",onClick:n,type:"button"},"\xd7"))}return null}ee.defaultProps={notification:null};var te=ee;var ne=function(e,t){var n=Object(u.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),a=Object(m.a)(n,2),r=a[0],c=a[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;c(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]},ae=n(28),re=n(26),ce=["children","onRedirectCallback"],oe=function(){return window.history.replaceState({},document.title,window.location.pathname)},le=i.a.createContext(),ue=function(e){var t=e.children,n=e.onRedirectCallback,a=void 0===n?oe:n,r=Object(ae.a)(e,ce),c=Object(u.useState)(),o=Object(m.a)(c,2),l=o[0],s=o[1],p=Object(u.useState)(),f=Object(m.a)(p,2),d=f[0],b=f[1],h=Object(u.useState)(),v=Object(m.a)(h,2),g=v[0],w=v[1],y=Object(u.useState)(!0),E=Object(m.a)(y,2),x=E[0],O=E[1],j=Object(u.useState)(!1),N=Object(m.a)(j,2),S=N[0],C=N[1];Object(u.useEffect)((function(){(function(){var e=Object(k.a)(T.a.mark((function e(){var t,n,c,o,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(re.a)(r);case 2:if(t=e.sent,w(t),!window.location.search.includes("code=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:n=e.sent,c=n.appState,a(c);case 10:return e.next=12,t.isAuthenticated();case 12:if(o=e.sent,s(o),!o){e.next=19;break}return e.next=17,t.getUser();case 17:l=e.sent,b(l);case 19:O(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var I=function(){var e=Object(k.a)(T.a.mark((function e(){var t,n,a=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},C(!0),e.prev=2,e.next=5,g.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,C(!1),e.finish(10);case 13:return e.next=15,g.getUser();case 15:n=e.sent,b(n),s(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(k.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,g.handleRedirectCallback();case 3:return e.next=5,g.getUser();case 5:t=e.sent,O(!1),s(!0),b(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(le.Provider,{value:{getIdTokenClaims:function(){return g.getIdTokenClaims.apply(g,arguments)},getTokenSilently:function(){return g.getTokenSilently.apply(g,arguments)},getTokenWithPopup:function(){return g.getTokenWithPopup.apply(g,arguments)},handleRedirectCallback:R,isAuthenticated:l,loading:x,loginWithPopup:I,loginWithRedirect:function(){return g.loginWithRedirect.apply(g,arguments)},logout:function(){return g.logout.apply(g,arguments)},popupOpen:S,user:d}},t)},ie=n(27),se=n(7),pe=n.n(se);var fe=function(e){function t(e,t){var n=["-","\u2013",".",",",";","!","?"].map((function(e){return{key:e,value:pe.a.lastIndexOf(t,e)}})).sort((function(e,t){return e.value>t.value?-1:e.value<t.value?1:0}))[0];return-1!==n.value&&function(e,t){return" "===pe.a.substr(t,e+1,1)}(n.value,t)&&!function(e,t){return e===t}(e,t)?pe.a.substr(t,0,n.value+1):t}function n(e,t){return void 0===e&&void 0===t?" ".concat("_/_"):0===e&&1===t?"":" ".concat(e+1,"/").concat(t)}return function(e){for(var a=e.linefeed,r=e.source,c=function(e){return null===e||void 0===e||""===e?"\n":e}(a),o=function(e,t){var n=t.slice();return"\n"===e&&(n=n.replace(/\n+/g,"\n")),n}(c,r),l=[];0!==o.length;){var u=void 0,i=280-n().length;-1!==(u=pe.a.prune(o,i,"")).indexOf(c)?(u=pe.a.substr(u,0,u.indexOf(c)),o=pe.a.substr(o,u.length+c.length)):(u=t(o,u),o=pe.a.substr(o,u.length+1)),l.push(u)}return l.map((function(e,t){var a=n(t,l.length),r="".concat(pe.a.trim(e)).concat(a);return{id:"_".concat(Math.random().toString(36).substr(2,9)),tweet:r}}))}};var de=function(e){var t=e.feature;return{healthy:!1,items:fe(t)({linefeed:"\n",source:""}),linefeed:"\n",notification:null,source:"",userId:""}},me="APPEND_SCREEN_NAME",be="CHANGE_SOURCE",he="CHANGE_TWEET",ve="DISMISS_TOAST",ge="RESET_TWEETSTORM",we="SET_HEALTHY",ye="SET_USER_ID";var Ee=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de({feature:e}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case me:var a="@".concat(n.value," ").concat(t.source);return Object(d.a)(Object(d.a)({},t),{},{items:fe(e)({linefeed:t.linefeed,source:a}),source:a});case be:return Object(d.a)(Object(d.a)({},t),{},{items:fe(e)({linefeed:t.linefeed,source:n.value}),source:n.value});case he:return Object(d.a)(Object(d.a)({},t),{},{items:Object(ie.a)(t.items).map((function(e){var t=Object(d.a)({},e);return t.id===n.value.id&&(t.tweet=n.value.tweet),t}))});case ve:return Object(d.a)(Object(d.a)({},t),{},{notification:null});case ge:return"success"===n.value.type?Object(d.a)(Object(d.a)({},de({feature:e})),{},{healthy:t.healthy,notification:n.value,userId:t.userId}):Object(d.a)(Object(d.a)({},t),{},{notification:n.value});case we:return Object(d.a)(Object(d.a)({},t),{},{healthy:n.value});case ye:return Object(d.a)(Object(d.a)({},t),{},{userId:n.value});default:return t}}};function xe(){return(xe=Object(k.a)(T.a.mark((function e(){var t,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/api/v2/health"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=function(){return xe.apply(this,arguments)};function je(){return(je=Object(k.a)(T.a.mark((function e(t){var n,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(e,n){e&&(console.log(e),t({type:we,value:!1})),n&&(console.log(n),t({type:we,value:!n.error}))},e.prev=1,e.next=4,Oe();case 4:a=e.sent,n(null,a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var Te=function(e){return je.apply(this,arguments)};var ke=function(e){var t=e.dispatch,n=e.setSource;return function(e){t({type:be,value:e.target.value}),n(e.target.value)}};var Ne=function(e){var t=e.dispatch;return function(e,n){t({type:he,value:{id:n.id,tweet:e.target.value}})}};function Se(){return(Se=Object(k.a)(T.a.mark((function e(t){var n,a,r,c,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.inReplyToTweetUrl,a=t.items,r=t.userId,e.next=3,fetch("".concat(f,"/api/v2/tweetstorm"),{body:JSON.stringify({inReplyToTweetUrl:n,items:a,userId:r}),headers:{"Content-Type":"application/json"},method:"POST"});case 3:return c=e.sent,e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ce=function(e){return Se.apply(this,arguments)};var Ie=function(e){return"https://twitter.com/".concat(e.userId.split("|")[1],"/status/").concat(e.statusIds[0])};var Re=function(e){var t=e.dispatch,n=e.inReplyToTweetUrl,a=e.items,r=e.setInReplyToTweetUrl,c=e.setSource,o=e.setWaiting,l=e.userId;function u(e,n){var a=null,l=null,u="success";e||n.error?(l=e?e.message:n.error.message,u="danger"):a=Ie(n.data),console.log(e,n),t({type:ge,value:{link:a,message:l,type:u}}),"success"===u&&(r(""),c("")),o(!1)}function i(){return(i=Object(k.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,Ce({inReplyToTweetUrl:n,items:a,userId:l});case 4:u(null,e.sent),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),u(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return function(){return i.apply(this,arguments)}};var Ue=function(e){var t=e.dispatch;return function(e,n){n&&t({type:me,value:n.user.screen_name})}};var _e=function(e){var t=e.initialState,n=e.reducer,a=Object(u.useContext)(le),r=a.isAuthenticated,c=a.loading,l=a.loginWithRedirect,s=a.logout,p=a.user,f=Object(o.useFeature)();Object(u.useEffect)((function(){Te(C)}),[]),Object(u.useEffect)((function(){r&&p&&C({type:ye,value:p.sub})}),[r,p]);var h=ne("source",""),v=Object(m.a)(h,2),g=v[0],w=v[1],y=Object(u.useReducer)(n,Object(d.a)(Object(d.a)({},t),{},{items:fe(f)({linefeed:t.linefeed,source:g}),source:g})),x=Object(m.a)(y,2),O=x[0],j=O.healthy,T=O.items,k=O.notification,N=O.source,S=O.userId,C=x[1];Object(u.useEffect)((function(){if(k&&"danger"!==k.type){var e=setTimeout((function(){C({type:ve})}),3e3);return function(){return clearTimeout(e)}}}),[k]);var I=Object(u.useState)(""),R=Object(m.a)(I,2),U=R[0],_=R[1],W=Object(u.useState)(!1),A=Object(m.a)(W,2),F=A[0],P=A[1],J=ke({dispatch:C,setSource:w}),z=Ne({dispatch:C}),D=Re({dispatch:C,inReplyToTweetUrl:U,items:T,setInReplyToTweetUrl:_,setSource:w,setWaiting:P,userId:S}),H=Ue({dispatch:C}),Y=Object(u.useCallback)(H,[]);return c?i.a.createElement(M,null):i.a.createElement("article",{className:"container content-center mx-auto m-1 p-4"},i.a.createElement("header",{className:"flex flex-row justify-between"},r?i.a.createElement(q,{logout:s,user:p}):i.a.createElement("span",{className:"my-4"})),i.a.createElement($,null),r?i.a.createElement(L,{healthy:j,inReplyToTweetUrl:U,items:T,onChangeSource:J,onChangeTweet:z,onClick:D,replyToTweetCallback:Y,setInReplyToTweetUrl:_,source:N,userId:S,waiting:F}):i.a.createElement(G,{loginWithRedirect:l}),i.a.createElement(te,{notification:k,onClick:function(){return C({type:ve})}}),i.a.createElement(E,{healthy:j,version:b.a}))},We=["FEATURE_V1"],Ae=n(17);var Fe=function(){Ae.a.initialize("UA-54446639-10"),Ae.a.pageview("/")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=function(e){var t=e.logEvent,n=e.reducer;return function(e,a){var r=n(e,a);switch(a.type){case be:case he:break;default:t(a.type,a.value)}return r}},Je=Object(o.setFeatures)(We);Object(s.render)(i.a.createElement(ue,{client_id:p.clientId,domain:p.domain,onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)},redirect_uri:window.location.origin},i.a.createElement(a.AmplitudeProvider,{amplitudeInstance:c.a.getInstance(),apiKey:"7cbe8a9a37db4f88f06c79a387943cca"},i.a.createElement(a.Amplitude,null,(function(e){var t=e.logEvent;return i.a.createElement(l.a,{features:We},i.a.createElement(_e,{initialState:de({feature:Je}),reducer:Pe({logEvent:t,reducer:Ee(Je)})}))})))),document.getElementById("root"),Fe()),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[29,1,2]]]);
//# sourceMappingURL=main.86e782df.chunk.js.map